if("undefined"!=typeof exports)var XMLHttpRequest=require("xmlhttprequest").XMLHttpRequest;var mcstatus=function(e,r){function n(e,r,n){function a(e,r){for(var n=[],a=[],t=0;t<r.length;t++)n[r[t]]=!0;for(t=0;t<e.length;t++)n[e[t]]||a.push(e[t]);return a}for("leave"==n&&(changelistarray=a(e,r)),"join"==n&&(changelistarray=a(r,e)),changeliststring="",o=0;o<changelistarray.length;o++)1==changelistarray.length?changeliststring+=changelistarray[0]:2==changelistarray.length?o+1===changelistarray.length?changeliststring+=" and "+changelistarray[1]:changeliststring+=changelistarray[0]:o+1===changelistarray.length?changeliststring+="and "+changelistarray[o]:changeliststring+=changelistarray[o]+", ";return changeliststring}function a(e){return e.charAt(0).toUpperCase()+e.slice(1)}try{if(!r)throw new Error("Callback is required.");if("function"!=typeof r)throw new Error("Callback must be a function");if("object"!=typeof e)throw new Error("Paramater options must be an object or an array.")}catch(t){r(t)}Array.isArray(e)!==!0&&(e=[e]);var s=[];for(var o in e)!function(t){"undefined"==typeof data&&(data={});try{if(void 0===e[t].ip)throw new Error("Ip is required for the server "+e[t].name+".")}catch(o){r(o)}var i=e[t].ip,l=e[t].name||i,p=[],h="";s[t]=new XMLHttpRequest,s[t].onreadystatechange=function(){if(4==s[t].readyState&&200==s[t].status)if(response=JSON.parse(s[t].responseText),null===response.sample&&response.online>0||0===response.max)try{if(null===response.sample&&response.online>0)throw"Unfortunately, "+l+" is hiding their playerlist.";if(0===response.max)throw'Could not find the ip for "'+l+'" or the server is not running.'}catch(e){void 0===data[i+"error"]&&null!==data[i+"error"]?(r(e),data[i+"error"]=e):(data[i+"error"]!==e&&r(e),data[i+"error"]=e)}else{if(void 0!==data&&void 0!==data[i+"error"]&&data[i+"error"]!==!1&&(data[i+"error"]=!1),null!==response.sample&&response.online<13){for(t=0;t<response.sample.length;t++)p.push(response.sample[t].name);for(t=0;t<p.length;t++)h+=1==p.length?p[0]:2==p.length?t+1===p.length?" and "+p[1]:p[0]:t+1===p.length?"and "+p[t]:p[t]+", "}else if(response.online>12)return void r('The server "'+l+'" has too many players online to get an accurate list of players.');void 0===data||void 0!==data&&void 0===data[i]&&null!==data[i]?(r(0===p.length?"Currently no players are playing on "+l+".":1===response.online?"Currently "+h+" is playing on "+l+".":"Currently "+h+" are playing on "+l+"."),data[i]=p):(response.online-data[i].length>0&&r(1==response.online?a(n(data[i],p,"join"))+" joined "+l+". Now there are 1/"+response.max+".":a(n(data[i],p,"join"))+" joined "+l+". Now there are "+response.online+"/"+response.max+" players on the server, including "+h+"."),response.online-data[i].length<0&&(null===p&&(p=[]),r(0===response.online?a(n(data[i],p,"leave"))+" left "+l+". Now there are 0/"+response.max+" players on the server, so there are no players on the server.":1==response.online?a(n(data[i],p,"leave"))+" left "+l+". Now there is 1/"+response.max+" players on the server, and only "+h+" online.":a(n(data[i],p,"leave"))+" left "+l+". Now there are "+response.online+"/"+response.max+" players on the server, including "+h+".")),data[i]=p)}};var d="http://mcping.net/api/"+i+"/online,max,sample,strippedmotd";s[t].open("GET",d,"true"),s[t].send()}(o)};"undefined"!=typeof exports&&(exports.mcstatus=mcstatus);