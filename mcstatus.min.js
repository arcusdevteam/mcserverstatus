if("undefined"!=typeof exports)var XMLHttpRequest=require("xmlhttprequest").XMLHttpRequest;var mcstatus=function(a,b){function c(a,b,c){function d(a,b){for(var c=[],d=[],e=0;e<b.length;e++)c[b[e]]=!0;for(e=0;e<a.length;e++)c[a[e]]||d.push(a[e]);return d}for("leave"==c&&(changelistarray=d(a,b)),"join"==c&&(changelistarray=d(b,a)),changeliststring="",g=0;g<changelistarray.length;g++)1==changelistarray.length?changeliststring+=changelistarray[0]:2==changelistarray.length?g+1===changelistarray.length?changeliststring+=" and "+changelistarray[1]:changeliststring+=changelistarray[0]:g+1===changelistarray.length?changeliststring+="and "+changelistarray[g]:changeliststring+=changelistarray[g]+", ";return changeliststring}function d(a){return a.charAt(0).toUpperCase()+a.slice(1)}try{if(!b)throw new Error("Callback is required.");if("function"!=typeof b)throw new Error("Callback must be a function");if("object"!=typeof a)throw new Error("Paramater options must be an object or an array.")}catch(e){b(e)}Array.isArray(a)!==!0&&(a=[a]);var f=[];for(var g in a)!function(e){"undefined"==typeof data&&(data={});try{if(void 0===a[e].ip)throw new Error("Ip is required for the server "+a[e].name+".")}catch(g){b(g)}var h=a[e].ip,i=a[e].name||h,j=[],k="";f[e]=new XMLHttpRequest,f[e].onreadystatechange=function(){if(4==f[e].readyState&&200==f[e].status)if(response=JSON.parse(f[e].responseText),null===response.sample&&response.online>0||0===response.max)try{if(null===response.sample&&response.online>0)throw"Unfortunately, "+i+" is hiding their playerlist.";if(0===response.max)throw'Could not find the ip for "'+i+'" or the server is not running.'}catch(a){void 0===data[h+"error"]&&null!==data[h+"error"]?(b(a),data[h+"error"]=a):(data[h+"error"]!==a&&b(a),data[h+"error"]=a)}else{if(void 0!==data&&void 0!==data[h+"error"]&&data[h+"error"]!==!1&&(data[h+"error"]=!1),null!==response.sample&&response.online<13){for(e=0;e<response.sample.length;e++)j.push(response.sample[e].name);for(e=0;e<j.length;e++)k+=1==j.length?j[0]:2==j.length?e+1===j.length?" and "+j[1]:j[0]:e+1===j.length?"and "+j[e]:j[e]+", "}else if(response.online>12)return void b('The server "'+i+'" has too many players online to get an accurate list of players.');void 0===data||void 0!==data&&void 0===data[h]&&null!==data[h]?(b(0===j.length?"Currently no players are playing on "+i+".":1===response.online?"Currently "+k+" is playing on "+i+".":"Currently "+k+" are playing on "+i+"."),data[h]=j):(response.online-data[h].length>0&&b(1==response.online?d(c(data[h],j,"join"))+" joined "+i+". Now there are 1/"+response.max+".":d(c(data[h],j,"join"))+" joined "+i+". Now there are "+response.online+"/"+response.max+" players on the server, including "+k+"."),response.online-data[h].length<0&&(null===j&&(j=[]),b(0===response.online?d(c(data[h],j,"leave"))+" left "+i+". Now there are 0/"+response.max+" players on the server, so there are no players on the server.":1==response.online?d(c(data[h],j,"leave"))+" left "+i+". Now there is 1/"+response.max+" players on the server, and only "+k+" online.":d(c(data[h],j,"leave"))+" left "+i+". Now there are "+response.online+"/"+response.max+" players on the server, including "+k+".")),data[h]=j)}};var l="http://mcping.net/api/"+h+"/online,max,sample,strippedmotd";f[e].open("GET",l,"true"),f[e].send()}(g)};"undefined"!=typeof exports&&(exports.mcstatus=mcstatus),setInterval(function(){mcstatus({ip:"enderman.biz"},function(a){console.log(a)})},1e3);