if("undefined"!=typeof exports)var XMLHttpRequest=require("xmlhttprequest").XMLHttpRequest;var mcstatus=function(a,b,c){function d(a,b,c){function d(a,b){for(var c=[],d=[],e=0;e<b.length;e++)c[b[e]]=!0;for(e=0;e<a.length;e++)c[a[e]]||d.push(a[e]);return d}for("leave"==c&&(changelistarray=d(a,b)),"join"==c&&(changelistarray=d(b,a)),changeliststring="",i=0;i<changelistarray.length;i++)1==changelistarray.length?changeliststring+=changelistarray[0]:2==changelistarray.length?i+1===changelistarray.length?changeliststring+=" and "+changelistarray[1]:changeliststring+=changelistarray[0]:i+1===changelistarray.length?changeliststring+="and "+changelistarray[i]:changeliststring+=changelistarray[i]+", ";return changeliststring}function e(a){return a.charAt(0).toUpperCase()+a.slice(1)}"undefined"==typeof data&&(data={});var f=[],g="",h=new XMLHttpRequest;h.onreadystatechange=function(){if(4==h.readyState&&200==h.status)if(response=JSON.parse(h.responseText),null===response.sample&&response.online>0||0===response.max)try{if(null===response.sample&&response.online>0)throw"Unfortunately, "+b+" is hiping their playerlist.";if(0===response.max)throw'Could not find the ip for "'+b+'" or the server is not running.'}catch(j){void 0===data||void 0!==data&&void 0===data[a+"error"]&&null!==data[a+"error"]?(c(j),void 0===data&&(data={}),data[a+"error"]=j):(data[a+"error"]!==j&&c(j),data[a+"error"]=j)}else{if(void 0!==data&&void 0!==data[a+"error"]&&data[a+"error"]!==!1&&(data[a+"error"]=!1),null!==response.sample&&response.online<13){for(i=0;i<response.sample.length;i++)f.push(response.sample[i].name);for(i=0;i<f.length;i++)g+=1==f.length?f[0]:2==f.length?i+1===f.length?" and "+f[1]:f[0]:i+1===f.length?"and "+f[i]:f[i]+", "}else if(response.online>12)return void c("The server has too many players online to get an accurate list of players.");void 0===data||void 0!==data&&void 0===data[a]&&null!==data[a]?(c(0===f.length?"Currently no players are playing on "+b+".":1===response.online?"Currently "+g+" is playing on "+b+".":"Currently "+g+" are playing on "+b+"."),data[a]=f):(response.online-data[a].length>0&&c(1==response.online?e(d(data[a],f,"join"))+" joined "+b+". Now there are 1/"+response.max+".":e(d(data[a],f,"join"))+" joined "+b+". Now there are "+response.online+"/"+response.max+" players on the server, including "+g+"."),response.online-data[a].length<0&&(null===f&&(f=[]),c(0===response.online?e(d(data[a],f,"leave"))+" left "+b+". Now there are 0/"+response.max+" players on the server, so there are no players on the server.":1==response.online?e(d(data[a],f,"leave"))+" left "+b+". Now there is 1/"+response.max+" players on the server, and only "+g+" online.":e(d(data[a],f,"leave"))+" left "+b+". Now there are "+response.online+"/"+response.max+" players on the server, including "+g+".")),data[a]=f)}};var j="http://mcping.net/api/"+a+"/online,max,sample,strippedmotd";h.open("GET",j,"true"),h.send()};"undefined"!=typeof exports&&(exports.mcstatus=mcstatus),mcstatus("198.24.164.162:34009","koth",function(a){console.log(a)});