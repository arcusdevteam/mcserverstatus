mcstatus=function(a,b,c){function d(a,b,c){function d(a,b){for(var c=[],d=[],e=0;e<b.length;e++)c[b[e]]=!0;for(e=0;e<a.length;e++)c[a[e]]||d.push(a[e]);return d}if("leave"==c)var e=d(a,b);for("join"==c&&(e=d(b,a)),changeliststring="",i=0;i<e.length;i++)1==e.length?changeliststring+=e[0]:2==e.length?i+1===e.length?changeliststring+=" and "+e[1]:changeliststring+=e[0]:i+1===e.length?changeliststring+="and "+e[i]:changeliststring+=e[i]+", ";return changeliststring}function e(a){return a.charAt(0).toUpperCase()+a.slice(1)}"undefined"==typeof data&&(data={});var f=new XMLHttpRequest;f.onreadystatechange=function(){if(4==f.readyState&&200==f.status)if(response=JSON.parse(f.responseText),null===response.sample&&response.online>0||0===response.max)try{if(null===response.sample&&response.online>0)throw"Unfortunately, "+b+" is hiding their playerlist.";if(0===response.max)throw'Could not find the ip for "'+b+'" or the server is not running.'}catch(a){void 0===data||void 0!==data&&void 0===data[b+"error"]&&null!==data[b+"error"]?(c(a),void 0===data&&(data={}),data[b+"error"]=a):(data[b+"error"]!==a&&c(a),data[b+"error"]=a)}else{if(void 0!==data&&void 0!==data[b+"error"]&&data[b+"error"]!==!1&&(data[b+"error"]=!1),null!==response.sample&&response.online<13){for(g=[],playerliststring="",i=0;i<response.sample.length;i++)g.push(response.sample[i].name);for(i=0;i<g.length;i++)1==g.length?playerliststring+=g[0]:2==g.length?i+1===g.length?playerliststring+=" and "+g[1]:playerliststring+=g[0]:i+1===g.length?playerliststring+="and "+g[i]:playerliststring+=g[i]+", "}else if(0===response.online)g=[];else if(response.online>12)return void c("The server has too many players online to get an accurate list of players.");if(void 0===data||void 0!==data&&void 0===data[b]&&null!==data[b])c(0===g.length?"Currently no players are playing on "+b+".":1===response.online?"Currently "+playerliststring+" is playing on "+b+".":"Currently "+playerliststring+" are playing on "+b+"."),data[b]=g;else{if(response.online-data[b].length>0&&c(1==response.online?e(d(data[b],g,"join"))+" joined "+b+". Now there are 1/"+response.max+".":e(d(data[b],g,"join"))+" joined "+b+". Now there are "+response.online+"/"+response.max+" players on the server, including "+playerliststring+"."),response.online-data[b].length<0){if(null===g)var g=[];c(0===response.online?e(d(data[b],g,"leave"))+" left "+b+". Now there are 0/"+response.max+" players on the server, so there are no players on the server.":1==response.online?e(d(data[b],g,"leave"))+" left "+b+". Now there is 1/"+response.max+" players on the server, and only "+playerliststring+" online.":e(d(data[b],g,"leave"))+" left "+b+". Now there are "+response.online+"/"+response.max+" players on the server, including "+playerliststring+".")}data[b]=g}}};var g="http://mcping.net/api/"+a+"/online,max,sample,strippedmotd";f.open("GET",g,"true"),f.send()};exports.mcstatus=mcstatus;
